<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<!--xmlns:sec="http://www.thymeleaf.org/extras/spring-security">-->

<head>
    <div th:replace="/layout/header :: fragment-header"></div>
</head>

<!--<sec:authorize access="isAuthenticated()">
  <sec:authentication property="principal" var="principal"/>
</sec:authorize>-->

<body id="page-top">
<!-- Page Wrapper -->
<div id="wrapper">
    <!-- Sidebar -->
    <div th:replace="/layout/sidebar.html :: fragment-sidebar"></div>
    <!-- End of Sidebar -->

    <!-- Content Wrapper -->
    <div id="content-wrapper" class="d-flex flex-column">
        <!-- Main Content -->
        <div id="content">
            <!-- Topbar -->
            <div th:replace="/layout/topbar.html :: fragment-topbar"></div>
            <!-- End of Topbar -->

            <!-- Begin Page Content -->
            <div class="container-fluid">

                <!-- Page Heading -->
                <div class="card shadow mb-4">
                    <div class="card-header py-3 d-flex justify-content-start align-items-center">
                        <h2 class="m-0 font-weight-bold text-primary text-center">통계</h2>
                    </div>
                </div>
                <div class="col-xl-6 col-md-6 mb-4 mr-auto">
                    <div class="card shadow h-100">
                        <div class="card-body">
                            <div>
                                <canvas id="myChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>


            </div>
            <!-- /.container-fluid -->


        </div>
        <!-- End of Main Content -->

        <!-- Footer -->
        <footer th:replace="/layout/footer.html :: fragment-footer"></footer>
        <!-- End of Footer -->
    </div>
    <!-- End of Content Wrapper -->
</div>
<!-- End of Page Wrapper -->

<!-- Scroll to Top Button-->
<a class="scroll-to-top rounded" href="#page-top">
    <i class="fas fa-angle-up"></i>
</a>

<!-- Page level plugins -->
<script src="/vendor/chart.js/Chart.min.js"></script>
<script th:inline="javascript">
    /*<![CDATA[*/

    var d1 = [[${memRatio}]];
    var d2 = [[${nonMemRatio}]];

    /*]]>*/


    const labels = [
        'User',
        'Non-User'
    ];

    const data = {
        labels: labels,
        datasets: [{
            backgroundColor: ['rgb(255, 99, 132)', 'rgb(54, 162, 235)'],
            data: [d1,d2]
        }]
    };

    const config = {
        type: 'pie',
        data: data,
        options: {

            legend: {
                position: 'top',
            },
            title: {
                display: true,
                text: 'Food MBTI 사용 조사'
            }

        }
    };

    const myChart = new Chart(
        document.getElementById('myChart'),
        config
    );



</script>
</body>
</html>
